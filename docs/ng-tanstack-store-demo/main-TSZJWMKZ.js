import{a as J}from"./chunk-R6KTYGNW.js";import{a as K}from"./chunk-CZW56B37.js";import{a as U,b as H,c as V,d as Q,e as G,f as W,g,h as Y,i as Z,j as q,k as z,l as X}from"./chunk-UP5P6NED.js";import{A as w,Eb as O,J as T,Ma as f,O as u,Oa as M,Qa as x,R as A,Ta as p,Ua as i,Va as L,X as m,Za as s,_ as l,eb as C,fa as R,fb as N,hb as D,ib as I,ja as _,l as B,mb as $,n as E,na as F,qb as j,s as v,y as k,z as S,za as P}from"./chunk-ATDAGXIH.js";var tt=[{path:"products",loadComponent:()=>import("./chunk-P7OPCMIB.js").then(t=>t.ProductCatalogueComponent),title:"Product list"},{path:"products/:id",loadComponent:()=>import("./chunk-6ME32TQ7.js").then(t=>t.ProductDetailsComponent),title:"Product"},{path:"my-cart",loadComponent:()=>import("./chunk-OEQA3JUI.js").then(t=>t.CartComponent),title:"My shopping cart"},{path:"categories/:category",loadComponent:()=>import("./chunk-TW6VPRJB.js").then(t=>t.CategoryProductsComponent),title:"Category"},{path:"",pathMatch:"full",redirectTo:"products"},{path:"**",redirectTo:"products"}];var ot=(()=>{let e=class e extends g{constructor(){super(...arguments),this.title=m(Q),this.productService=m(J)}updateTitle(o){let r=this.buildTitle(o)||"",n=o.root.firstChild?.params.id||"";n?this.productService.getProduct(n).then(d=>{let y=d?.title||"";this.title.setTitle(`Product - ${y}`)}):this.title.setTitle(r)}};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=_(e)))(n||e)}})(),e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function st(t,e,a){let o="https://fakestoreapi.com/products",r="https://fakestoreapi.com/products/categories";return()=>{t.get(r).pipe(T(3),w(t.get(o).pipe(T(3),S(c=>(console.error(c),E([]))))),u(([c,d])=>{a.updateCategoriesAndProducts(c,d);let y=c.reduce((at,b)=>{let pt=d.filter(ct=>ct.category===b);return at.concat({category:b,products:pt})},[]);a.updateCategoryProducts(y)}),K(e),S(c=>(a.updateCategoriesAndProducts([],[]),a.updateCategoryProducts([]),console.error(c),B))).subscribe()}}var rt={providers:[H(),q(tt,z()),{provide:g,useClass:ot},{provide:$,multi:!0,deps:[U,F,X],useFactory:(t,e,a)=>st(t,e,a)}]};var h=(...t)=>{R(h);let e=m(Y),a=m(j);return e.events.pipe(k(o=>o instanceof G),v(o=>o),v(({url:o,urlAfterRedirects:r})=>!t.includes(o)&&!t.includes(r)),u(()=>a.markForCheck()))};var mt=()=>["my-cart"];function dt(t,e){t&1&&(p(0,"a",0),s(1,"Home"),i())}function ut(t,e){t&1&&(p(0,"span"),s(1,"\xA0"),i())}function lt(t,e){t&1&&(p(0,"a",1),s(1,"View Cart"),i()),t&2&&M("routerLink",N(1,mt))}function ft(t,e){t&1&&(p(0,"span"),s(1,"\xA0"),i())}var nt=(()=>{let e=class e{constructor(){this.isShowHomeButton$=h("/","/products"),this.isShowViewCartButton$=h("/my-cart")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=l({type:e,selectors:[["app-nav-bar"]],standalone:!0,features:[C],decls:7,vars:6,consts:[["routerLink","/"],[3,"routerLink"]],template:function(r,n){r&1&&(p(0,"div"),f(1,dt,2,0,"a",0),D(2,"async"),f(3,ut,2,0)(4,lt,2,2,"a",1),D(5,"async"),f(6,ft,2,0),i()),r&2&&(P(),x(1,I(2,2,n.isShowHomeButton$)?1:3),P(3),x(4,I(5,4,n.isShowViewCartButton$)?4:6))},dependencies:[Z,O],styles:["div[_ngcontent-%COMP%]{background:#daa520;height:50px;padding:.25rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center}"],changeDetection:0});let t=e;return t})();var it=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=l({type:e,selectors:[["app-root"]],standalone:!0,features:[C],decls:5,vars:0,template:function(r,n){r&1&&(p(0,"div")(1,"h2"),s(2,"Angular Tanstack Store Demo"),i(),L(3,"app-nav-bar")(4,"router-outlet"),i())},dependencies:[W,nt],styles:["div[_ngcontent-%COMP%]{padding:.75rem}h2[_ngcontent-%COMP%]{margin-bottom:.75rem}"],changeDetection:0});let t=e;return t})();V(it,rt).catch(t=>console.error(t));
